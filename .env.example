# ==========================================
# AQMRG AI Analytics Backend - Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# NEVER commit .env file to version control
# ==========================================

# ==========================================
# GENERAL CONFIGURATION
# ==========================================

# Environment (development, staging, production)
NODE_ENV=development
ENVIRONMENT=development

# Application
APP_NAME=AQMRG AI Analytics Backend
APP_VERSION=1.0.0
APP_URL=http://localhost:8000

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# Timezone
TZ=UTC

# ==========================================
# API GATEWAY CONFIGURATION
# ==========================================

# API Gateway
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=8000
API_VERSION=v1

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,https://aqmrg.org
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=15m
RATE_LIMIT_PUBLIC=100
RATE_LIMIT_AUTHENTICATED=1000
RATE_LIMIT_ADMIN=unlimited

# Request Timeout
REQUEST_TIMEOUT=30s
UPLOAD_MAX_SIZE=10mb

# ==========================================
# MICROSERVICES PORTS
# ==========================================

AUTH_SERVICE_PORT=8001
DATA_INGESTION_SERVICE_PORT=8002
MODEL_SERVING_SERVICE_PORT=8003
ANALYTICS_SERVICE_PORT=8004
NOTIFICATION_SERVICE_PORT=8005
SENSOR_ADAPTER_SERVICE_PORT=8006
EXPORT_SERVICE_PORT=8007

# ==========================================
# DATABASE - PostgreSQL
# ==========================================

# Connection
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=aqmrg
DATABASE_USER=aqmrg
DATABASE_PASSWORD=your_postgres_password_change_me
DATABASE_SSL=false
DATABASE_SSL_MODE=prefer

# Connection Pool
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=30000
DATABASE_POOL_ACQUIRE_TIMEOUT=30000

# Full connection URL (alternative to individual params)
DATABASE_URL=postgresql://aqmrg:your_postgres_password_change_me@localhost:5432/aqmrg

# Read Replicas (optional, comma-separated)
DATABASE_READ_REPLICAS=

# ==========================================
# DATABASE - InfluxDB (Time-Series)
# ==========================================

# Connection
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your_influxdb_token_change_me
INFLUXDB_ORG=aqmrg
INFLUXDB_BUCKET=sensor_data

# Retention Policies
INFLUXDB_RETENTION_RAW=30d
INFLUXDB_RETENTION_HOURLY=730d
INFLUXDB_RETENTION_DAILY=0

# Batch Settings
INFLUXDB_BATCH_SIZE=5000
INFLUXDB_FLUSH_INTERVAL=10000

# ==========================================
# CACHE - Redis
# ==========================================

# Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false

# Connection Pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10

# Full connection URL (alternative)
REDIS_URL=redis://localhost:6379/0

# Cluster Mode (if using Redis Cluster)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381

# Cache TTL (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_DASHBOARD=30
CACHE_TTL_PREDICTIONS=300
CACHE_TTL_HISTORICAL=3600
CACHE_TTL_SESSION=86400

# ==========================================
# MESSAGE QUEUE - Apache Kafka
# ==========================================

# Brokers
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=aqmrg-backend

# Consumer Groups
KAFKA_CONSUMER_GROUP_SENSORS=aqmrg-sensors
KAFKA_CONSUMER_GROUP_ALERTS=aqmrg-alerts
KAFKA_CONSUMER_GROUP_ANALYTICS=aqmrg-analytics

# Producer Settings
KAFKA_COMPRESSION_TYPE=gzip
KAFKA_BATCH_SIZE=16384
KAFKA_LINGER_MS=10
KAFKA_ACKS=1

# Consumer Settings
KAFKA_SESSION_TIMEOUT=30000
KAFKA_HEARTBEAT_INTERVAL=3000
KAFKA_AUTO_OFFSET_RESET=earliest

# Topics
KAFKA_TOPIC_SENSOR_RAW=sensor.raw.airquality
KAFKA_TOPIC_SENSOR_VALIDATED=sensor.processed.validated
KAFKA_TOPIC_ALERTS=alerts.triggered
KAFKA_TOPIC_PREDICTIONS=predictions.generated

# SSL/SASL (for production)
KAFKA_SSL_ENABLED=false
KAFKA_SASL_ENABLED=false
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_minimum_32_chars_change_in_production
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_minimum_32_chars_change_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=aqmrg-api
JWT_AUDIENCE=aqmrg-users

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true
PASSWORD_HASH_ROUNDS=10

# Session Management
SESSION_SECRET=your_session_secret_change_me
SESSION_MAX_AGE=86400000
SESSION_ROLLING=true

# Multi-Factor Authentication
MFA_ENABLED=false
MFA_ISSUER=AQMRG
MFA_REQUIRED_FOR_ADMIN=true

# API Key Management
API_KEY_HEADER=X-API-Key
API_KEY_PREFIX=aqmrg_

# ==========================================
# MACHINE LEARNING - MLflow
# ==========================================

# MLflow Tracking
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_BACKEND_STORE_URI=postgresql://aqmrg:your_postgres_password_change_me@localhost:5432/aqmrg
MLFLOW_DEFAULT_ARTIFACT_ROOT=/mlflow/artifacts
MLFLOW_EXPERIMENT_NAME=aqmrg-experiments

# Model Registry
MLFLOW_REGISTRY_URI=http://localhost:5000

# Model Serving
MODEL_SERVING_WORKERS=2
MODEL_SERVING_TIMEOUT=30s
MODEL_CACHE_SIZE=3

# Model Versions (production deployment)
MODEL_PREDICTION_4HR_VERSION=latest
MODEL_PREDICTION_24HR_VERSION=latest
MODEL_PREDICTION_72HR_VERSION=latest
MODEL_CORRELATION_VERSION=latest
MODEL_ANOMALY_VERSION=latest

# GPU Configuration
CUDA_VISIBLE_DEVICES=0
TF_FORCE_GPU_ALLOW_GROWTH=true

# ==========================================
# DATA PIPELINE - Apache Airflow
# ==========================================

# Airflow Configuration
AIRFLOW_HOME=/opt/airflow
AIRFLOW_EXECUTOR=LocalExecutor
AIRFLOW_LOAD_EXAMPLES=false
AIRFLOW_WEBSERVER_PORT=8080
AIRFLOW_DATABASE_URL=postgresql://aqmrg:your_postgres_password_change_me@localhost:5432/airflow

# DAG Settings
AIRFLOW_DAG_DIR=/opt/airflow/dags
AIRFLOW_DAG_RUN_TIMEOUT=3600
AIRFLOW_PARALLELISM=32
AIRFLOW_MAX_ACTIVE_RUNS_PER_DAG=16

# ==========================================
# EXTERNAL APIs - SENSOR MANUFACTURERS
# ==========================================

# AirQo API
AIRQO_API_ENABLED=true
AIRQO_API_KEY=your_airqo_api_key_change_me
AIRQO_API_URL=https://api.airqo.net/api/v2
AIRQO_API_TIMEOUT=30s
AIRQO_RATE_LIMIT=1000

# PurpleAir API
PURPLEAIR_API_ENABLED=true
PURPLEAIR_API_KEY=your_purpleair_api_key_change_me
PURPLEAIR_API_URL=https://api.purpleair.com/v1
PURPLEAIR_API_TIMEOUT=30s
PURPLEAIR_RATE_LIMIT=500

# Custom Sensor Adapter
CUSTOM_SENSOR_ENABLED=false
CUSTOM_SENSOR_API_URL=
CUSTOM_SENSOR_API_KEY=

# ==========================================
# EXTERNAL APIs - WEATHER DATA
# ==========================================

# OpenWeatherMap
OPENWEATHER_API_KEY=your_openweather_api_key
OPENWEATHER_API_URL=https://api.openweathermap.org/data/2.5

# Weather.com (alternative)
WEATHER_API_KEY=
WEATHER_API_URL=

# ==========================================
# NOTIFICATION SERVICES
# ==========================================

# Email Service (SMTP)
EMAIL_ENABLED=true
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_specific_password_change_me
EMAIL_FROM=noreply@aqmrg.org
EMAIL_FROM_NAME=AQMRG Air Quality Alerts

# SendGrid (alternative email provider)
SENDGRID_ENABLED=false
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=

# SMS Service - Twilio
SMS_ENABLED=true
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your_twilio_account_sid_change_me
TWILIO_AUTH_TOKEN=your_twilio_auth_token_change_me
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_MESSAGING_SERVICE_SID=

# SMS Service - AWS SNS (alternative)
AWS_SNS_ENABLED=false
AWS_SNS_REGION=us-east-1

# Push Notifications
PUSH_NOTIFICATIONS_ENABLED=false
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=

# Slack Notifications (for system alerts)
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#aqmrg-alerts

# ==========================================
# CLOUD STORAGE
# ==========================================

# Provider Selection (aws, azure, gcp, local)
CLOUD_STORAGE_PROVIDER=aws

# AWS S3
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=aqmrg-data
AWS_S3_BUCKET_BACKUPS=aqmrg-backups
AWS_S3_BUCKET_EXPORTS=aqmrg-exports

# Azure Blob Storage
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_STORAGE_CONTAINER=

# Google Cloud Storage
GCP_PROJECT_ID=
GCP_KEYFILE_PATH=
GCS_BUCKET_NAME=

# Local Storage (development)
LOCAL_STORAGE_PATH=/var/lib/aqmrg/storage

# ==========================================
# MONITORING & OBSERVABILITY
# ==========================================

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_RETENTION=15d

# Grafana
GRAFANA_ENABLED=true
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_change_me
GRAFANA_SECRET_KEY=your_grafana_secret_key

# Application Performance Monitoring (APM)
APM_ENABLED=false
APM_SERVICE_NAME=aqmrg-backend
APM_SERVER_URL=

# Elasticsearch (Logging)
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX=aqmrg-logs

# Sentry (Error Tracking)
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Jaeger (Distributed Tracing)
JAEGER_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# ==========================================
# FEATURE FLAGS
# ==========================================

# Core Features
FEATURE_PREDICTIONS_ENABLED=true
FEATURE_PREDICTIONS_4HR=true
FEATURE_PREDICTIONS_24HR=true
FEATURE_PREDICTIONS_72HR=false

FEATURE_ALERTS_ENABLED=true
FEATURE_EMAIL_ALERTS=true
FEATURE_SMS_ALERTS=true
FEATURE_PUSH_ALERTS=false

FEATURE_EXPORT_ENABLED=true
FEATURE_CSV_EXPORT=true
FEATURE_EXCEL_EXPORT=false
FEATURE_API_EXPORT=true

FEATURE_ANALYTICS_ENABLED=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_CUSTOM_REPORTS=true

FEATURE_ADMIN_PANEL_ENABLED=true
FEATURE_MODEL_DEPLOYMENT=true
FEATURE_SENSOR_MANAGEMENT=true
FEATURE_USER_MANAGEMENT=true

# Experimental Features
FEATURE_AI_INSIGHTS=false
FEATURE_PREDICTIVE_ALERTS=false
FEATURE_REAL_TIME_DASHBOARD=true

# ==========================================
# DATA PROCESSING & RETENTION
# ==========================================

# Data Ingestion
DATA_INGESTION_BATCH_SIZE=100
DATA_INGESTION_INTERVAL=10s
DATA_INGESTION_MAX_RETRIES=3

# Data Validation
DATA_VALIDATION_ENABLED=true
DATA_VALIDATION_STRICT_MODE=false
DATA_ANOMALY_DETECTION=true

# Data Retention
SENSOR_DATA_RETENTION_DAYS=730
PREDICTIONS_RETENTION_DAYS=365
ALERTS_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=2555

# Data Export Limits
EXPORT_MAX_ROWS=100000
EXPORT_MAX_DATE_RANGE_DAYS=365

# ==========================================
# BACKUP & DISASTER RECOVERY
# ==========================================

# Automated Backups
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=aqmrg-backups

# Database Backups
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_COMPRESSION=gzip

# Recovery Point Objective (RPO) / Recovery Time Objective (RTO)
RPO_MINUTES=15
RTO_HOURS=2

# ==========================================
# PERFORMANCE & SCALING
# ==========================================

# Worker Processes
WORKER_PROCESSES=auto
WORKER_CONNECTIONS=1024

# Request Processing
MAX_CONCURRENT_REQUESTS=100
REQUEST_QUEUE_SIZE=1000

# Database Query Performance
DATABASE_QUERY_TIMEOUT=30s
DATABASE_SLOW_QUERY_LOG=true
DATABASE_SLOW_QUERY_THRESHOLD=1s

# Cache Performance
CACHE_ENABLED=true
CACHE_COMPRESSION=true

# ==========================================
# HEALTH CHECKS & MONITORING
# ==========================================

# Health Check Endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live

# Service Dependencies Check
CHECK_DATABASE=true
CHECK_REDIS=true
CHECK_KAFKA=true
CHECK_INFLUXDB=true

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s

# ==========================================
# DEVELOPMENT & DEBUGGING
# ==========================================

# Debug Mode
DEBUG_MODE=false
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_KAFKA=false

# Development Tools
ENABLE_SWAGGER_UI=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_API_DOCS=true

# Hot Reload
HOT_RELOAD=true

# Testing
TEST_DATABASE_URL=postgresql://aqmrg:password@localhost:5432/aqmrg_test
TEST_MODE=false

# ==========================================
# SECURITY HEADERS & POLICIES
# ==========================================

# Security Headers
HELMET_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# Content Security Policy
CSP_DEFAULT_SRC="'self'"
CSP_SCRIPT_SRC="'self' 'unsafe-inline'"
CSP_STYLE_SRC="'self' 'unsafe-inline'"

# IP Whitelisting (optional, comma-separated)
IP_WHITELIST=

# Request Size Limits
MAX_JSON_SIZE=1mb
MAX_FILE_SIZE=10mb

# ==========================================
# COMPLIANCE & AUDIT
# ==========================================

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_SENSITIVE_DATA=false

# GDPR Compliance
GDPR_ENABLED=true
DATA_ANONYMIZATION=true

# Compliance Reporting
COMPLIANCE_REPORTS_ENABLED=true
COMPLIANCE_REPORT_SCHEDULE=0 0 1 * *

# ==========================================
# CUSTOM CONFIGURATION
# ==========================================

# Add your custom environment variables below
# CUSTOM_VAR_1=value1
# CUSTOM_VAR_2=value2
